# =============================================================================
# LastSignal Environment Variables
# =============================================================================
# Copy this file to .env.production (deploy) and fill in your values.
# NEVER commit .env to version control!
# =============================================================================

# -----------------------------------------------------------------------------
# Kamal (deploy)
# -----------------------------------------------------------------------------
KAMAL_IMAGE=ghcr.io/you/lastsignal_app
KAMAL_REGISTRY_SERVER=ghcr.io
KAMAL_REGISTRY_USERNAME=your-username
KAMAL_REGISTRY_PASSWORD=your-registry-token
KAMAL_SERVERS=203.0.113.10
KAMAL_PROXY_HOST=lastsignal.example.com

# -----------------------------------------------------------------------------
# Application
# -----------------------------------------------------------------------------
# Base URL for link generation (include protocol)
APP_BASE_URL=https://www.example.com

# Host for DNS rebinding protection and email links (no protocol)
APP_HOST=www.example.com

# Rails master key (required for production)
# Generate with: bin/rails credentials:edit (creates config/master.key)
RAILS_MASTER_KEY=your-rails-master-key-here

# Secret key base for session encryption (required for production)
# Generate with: bin/rails secret
SECRET_KEY_BASE=your-secret-key-base-here

# -----------------------------------------------------------------------------
# SMTP (Email)
# -----------------------------------------------------------------------------
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=your-smtp-user
SMTP_PASS=your-smtp-password
SMTP_DOMAIN=example.com
SMTP_FROM_EMAIL=noreply@example.com
SMTP_FROM_NAME=LastSignal

# -----------------------------------------------------------------------------
# Authentication
# -----------------------------------------------------------------------------
# Optional allowlist for private instances (comma-separated emails)
# When set, only these emails can request magic links.
ALLOWED_EMAILS=owner@example.com,admin@example.com

# -----------------------------------------------------------------------------
# Webhook (for email delivery tracking)
# -----------------------------------------------------------------------------
# Optional secret used to authenticate webhook calls
EMAIL_WEBHOOK_SECRET=your-webhook-secret-here

# -----------------------------------------------------------------------------
# Defaults
# -----------------------------------------------------------------------------
# See config/initializers/app_defaults.rb for timing, rate-limit, and crypto defaults.
